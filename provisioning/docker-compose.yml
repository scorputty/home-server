# This file will be called from Ansible

version: '2'

services:
  consul:
    container_name: consul
    image: docker.io/consul
    hostname: consul
    network_mode: host
    ports:
      - "8300:8300"
      - "8301:8301"
      - "8301:8301/udp"
      - "8302:8302"
      - "8302:8302/udp"
      - "8400:8400"
      - "8500:8500"
      - "8600:8600"
      - "8600:8600/udp"

    environment:
      - ENV appUser="consul"
      - ENV appGroup="1000"
      - 'CONSUL_LOCAL_CONFIG={"skip_leave_on_interrupt": true}'
    command: agent -ui -server -bind=127.0.0.1 -bootstrap-expect=1 -client=0.0.0.0
    volumes:
      - /etc/localtime:/etc/timezone:ro
      - /shared/data/consul:/consul/data
      - /shared/config/consul:/consul/config

  couchpotato:
    container_name: couchpotato
    image: docker.io/cryptout/couchpotato
    hostname: couchpotato
    network_mode: host
    ports:
      - "5050:5050"
    environment:
      - ENV appUser="media"
      - ENV appGroup="1000"
    volumes:
      - /etc/localtime:/etc/timezone:ro
      - /shared/config/couchpotato:/config
      - /shared/data/couchpotato:/data

  sabnzbd:
    container_name: sabnzbd
    image: docker.io/cryptout/sabnzbd
    hostname: sabnzbd
    network_mode: host
    ports:
      - "8080:8080"
      - "9090:9090"
    expose:
      - "9090"
    environment:
      - ENV appUser="media"
      - ENV appGroup="1000"
    volumes:
      - /etc/localtime:/etc/timezone:ro
      - /shared/config/sabnzbd:/config
      - /shared/data/sabnzbd/downloads:/downloads
      - /shared/data/sabnzbd/incomplete:/incomplete-downloads

  transmission:
    container_name: transmission
    image: docker.io/cryptout/transmission
    hostname: transmission
    network_mode: host
    ports:
      - 9091:9091
      - 51413:51413
      - 51413:51413/udp
    environment:
      - PUID="1000"
      - PGID="1000"
      - ENV appUser="media"
      - ENV appGroup="1000"
    volumes:
      - /etc/localtime:/etc/timezone:ro
      - /shared/data/transmission/downloads:/downloads
      - /shared/data/transmission/incomplete:/incomplete

  sickrage:
    container_name: sickrage
    image: docker.io/cryptout/sickrage
    hostname: sickrage
    network_mode: host
    ports:
      - 8081:8081
    environment:
      - PUID="1000"
      - PGID="1000"
      - ENV appUser="media"
      - ENV appGroup="1000"
    volumes:
      - /etc/localtime:/etc/timezone:ro
      - /shared/data/sickrage/data:/data
      - /shared/config/sickrage/config:/config
      - /shared/config/sickrage/cache:/cache
